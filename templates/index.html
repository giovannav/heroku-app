<!DOCTYPE html>
<html lang="pt-br">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.3.1/dist/css/bootstrap.min.css"
        integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
    <title>Index</title>
    <style>
        body {
            background-color: rgb(255, 255, 255);
        }

        img {
            max-height: 70px;
            max-width: 70px;
        }

        table,
        tr {
            padding: 30%;
            width: 600px;
            align-items: center;
            border: 1px solid #ccc;
        }
    </style>
</head>

<script>
    function check_inputs() {
        if (document.getElementById("description").value == "" || document.getElementById("file").value == "") {
            alert('Descrição ou arquivo vazios.');
        }
    }
</script>

<body>
    {% block y %}

    {% if session.id %}
    <!-- You are Register {{ session.id }} <a href="/logout">logout</a> -->

    <nav class="navbar navbar-expand-lg navbar-light bg-light">
        <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNavAltMarkup" aria-controls="navbarNavAltMarkup" aria-expanded="false" aria-label="Toggle navigation">
          <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="navbarNavAltMarkup">
          <div class="navbar-nav">
            <a class="nav-item nav-link active" href="/home2">Inicío<span class="sr-only">(current)</span></a>
            <a class="nav-item nav-link" href="/logout">Sair</a>
          </div>
        </div>
      </nav>

    <section>
        <div class="container h-100 mt-5 mb-5">
            <div class="row d-flex justify-content-center align-items-center h-100">
                <div class="col-lg-12 col-xl-11">
                    <div class="card text-black" style="min-height: 800px; border-radius: 25px;">
                        <div class="card-body p-md-5">
                            <div class="row justify-content-center">

                                <div class="col-md-10 col-lg-6 col-xl-5 order-2 order-lg-1">
                                    <h3 class="text-center">Horta urbana</h3>

                                    <form class="p-3 text-center" id="form1" method="post"
                                        enctype="multipart/form-data">

                                        <div class="d-flex flex-row align-items-center mb-4">
                                            <div class="form-outline flex-fill mb-0">
                                                <input class="form-control" type="file" name="file" id="file" accept=".jpg,.jpeg,.png,.tif,.tiff">
                                            </div>
                                        </div>

                                        <div class="d-flex flex-row align-items-center mb-4">
                                            <div class="form-outline flex-fill mb-0">
                                                <label class="form-label" for="description">Descrição</label>
                                                <input class="form-control" type="text" name="description"
                                                    id="description">

                                                <p id="alert"></p>

                                                <input type="submit" class="btn btn-primary mt-2" value="Carregar"
                                                    name="button" id="button" onclick="check_inputs()" />
                                            </div>
                                        </div>

                                    </form>



                                    <form class="mx-1 mx-md-4" method="post" enctype="multipart/form-data">
                                        <div class="d-flex flex-row align-items-center"
                                            style="width: 600px; margin-left: -45%;">
                                            <div class="form-outline flex-fill mb-2 mr-2">
                                                <label class="form-label" for="date_start">Filtrar por área</label>
                                                <select class="form-control" id="comp_select" name="comp_select">
                                                    <option selected>Listar todos</option>
                                                    <option value="1">Até 25%</option>
                                                    <option value="2">25% - 50%</option>
                                                    <option value="3">50% - 75%</option>
                                                    <option value="4">75% - 100%</option>
                                                </select>
                                            </div>

                                            <div class="form-outline flex-fill mb-2 mr-2">
                                                <label class="form-label" for="date_start">Data de início</label>
                                                <input class="form-control" type="date" id="date_start"
                                                    name="date_start" value="{{ request.form['date_start'] }}">
                                            </div>

                                            <div class="form-outline flex-fill mb-2 mr-2">
                                                <label class="form-label" for="date_start">Data final</label>
                                                <input class="form-control" type="date" id="date_end" name="date_end"
                                                    value="{{ request.form['date_end'] }}">
                                            </div>

                                            <div class="form-outline flex-fill mt-4">
                                                <input type="submit" class="btn btn-secondary form-control"
                                                    value="Pesquisar" name="button" id="button" />
                                            </div>

                                        </div>
                                    </form>


                                    <div class="d-flex flex-row align-items-center mb-4 justify-content-center">
                                        <div class="form-outline flex-fill mb-0">
                                            <table>
                                                <thead>
                                                    <tr>
                                                        <th>id</th>
                                                        <th>original</th>
                                                        <th>máscara</th>
                                                        <th>data upload</th>
                                                        <th>área própria</th>
                                                        <th></th>
                                                        <th></th>
                                                    </tr>
                                                </thead>
                                                <tbody>
                                                    {% for post in posts %}
                                                    <tr>
                                                        <form class="mx-1 mx-md-4" method="post"
                                                            enctype="multipart/form-data">
                                                            <input type="hidden" name="id" id="id"
                                                                value="{{ post['id'] }}">
                                                            <td>{{ post['id'] }}</td>
                                                            <td> <img src="/{{ post['image_path'] }}" alt=""></td>
                                                            <td> <img src="/{{ post['mask_path'] }}" alt=""></td>
                                                            <td>{{ post['date_upload'] }}</td>
                                                            <td>{{ post['proper_area'] }}%</td>
                                                            <td><input type="submit" class="btn btn-secondary btn-sm"
                                                                    value="Ver mais" name="button" id="button" /></td>
                                                            <td><input type="submit" class="btn btn-secondary btn-sm"
                                                                    value="Deletar" name="button" id="button"
                                                                    onclick="return confirm('Excluir item?')" /></td>
                                                        </form>
                                                    </tr>
                                                    {% endfor %}
                                                </tbody>
                                            </table>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>


    {% else %}
    Você não está logado. <a href="/login">Fazer login.</a>.
    {% endif %}

    {% endblock %}


    <footer class="footer" style="background-color: #282828;">
        <div class="text-center p-3" style="background-color: #282828; color: azure;">
            © 2022 Copyright:
        </div>
    </footer>
</body>


</html>